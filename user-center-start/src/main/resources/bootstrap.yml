server:
  port: 8081

spring:
  application:
    name: user-center-start
  profiles:
    active: dev
  config:
    import:
      - nacos:common.yml?group=DEFAULT_GROUP&refreshEnabled=true
  cloud:
    nacos:
      # Nacos服务器地址
      server-addr: ${NACOS_SERVER_ADDR:8.136.44.41:8848}
      # 认证信息（config和discovery共用）
      username: ${NACOS_USERNAME:nacos}
      password: ${NACOS_PASSWORD}
      # 配置中心
      config:
        namespace: ${NACOS_NAMESPACE:}
        group: DEFAULT_GROUP
        file-extension: yml
        # 使用 shared-configs 代替 spring.config.import
        shared-configs:
          - data-id: common.yml
            group: DEFAULT_GROUP
            refresh: true
      # 服务发现
      discovery:
        namespace: ${NACOS_NAMESPACE:}
        group: DEFAULT_GROUP

  mvc:
    pathmatch:
      matching-strategy: ANT_PATH_MATCHER

  servlet:
    multipart:
      max-file-size: 500MB
      max-request-size: 500MB

jasypt:
  encryptor:
    bootstrap: false

springdoc:
  packagesToScan: com.ravey.ai.user

mybatis-plus:
  mapper-locations: classpath*:/mappings/*Mapper.xml
  typeAliasesPackage: com.ravey.ai.user.**.entity
  global-config:
    banner: false
    db-config:
      id-type: AUTO
      insert-strategy: not_empty
      update-strategy: not_empty
      where-strategy: not_empty
      table-underline: true

management:
  endpoints:
    web:
      exposure:
        include: health,prometheus,service-registry
  metrics:
    tags:
      application: ${spring.application.name}
  server:
    port: 10080
  tracing:
    sampling:
      probability: 1.0
    enabled: true

---
# 开发环境
spring:
  config:
    activate:
      on-profile: dev

---
# 调试环境
spring:
  config:
    activate:
      on-profile: debug

---
# 测试环境
spring:
  config:
    activate:
      on-profile: test

---
# 预发布环境
spring:
  config:
    activate:
      on-profile: pre
  cloud:
    nacos:
      config:
        server-addr: ${NACOS_SERVER_ADDR:nacos-pre:8848}
        username: ${NACOS_USERNAME}
        password: ${NACOS_PASSWORD}

---
# 生产环境
spring:
  config:
    activate:
      on-profile: prod
  cloud:
    nacos:
      config:
        server-addr: ${NACOS_SERVER_ADDR:nacos.ravey.site:8848}
        username: ${NACOS_USERNAME}
        password: ${NACOS_PASSWORD}